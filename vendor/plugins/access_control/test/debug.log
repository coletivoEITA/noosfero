# Logfile created on 2014-05-21 14:01:31 +0000 by logger.rb/31641
  [1m[35m (104.6ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (172.2ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (20.1ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (164.3ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (20.0ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (77.0ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (21.1ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (110.3ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (14.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (17.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.0ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_a_content_author"], ["name", "just_a_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (11.9ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.6ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 1 AND "access_control_test_role_assignments"."resource_id" = 1 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.6ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.4ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 1], ["resource_type", "AccessControlTestResource"], ["role_id", 1]]
  [1m[36mAccessControlTestResource Load (0.3ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 1 LIMIT 1[0m
  [1m[35m (16.4ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (13.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (18.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_moderator' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.2ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_moderator' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_just_a_moderator"], ["name", "just_a_moderator"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (19.2ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 2 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 2 AND "access_control_test_role_assignments"."resource_id" = 2 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 2 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.3ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 2 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 2], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 2], ["resource_type", "AccessControlTestResource"], ["role_id", 2]]
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 2 LIMIT 1
  [1m[36m (12.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (1.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 2 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'
  [1m[36mAccessControlTestResource Load (0.5ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (2)[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (2)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (11.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (19.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_a_member"], ["name", "just_a_member"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (17.5ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 3 AND "access_control_test_role_assignments"."resource_id" = 3 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 3 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.3ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 3], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 3], ["resource_type", "AccessControlTestResource"], ["role_id", 3]]
  [1m[36mAccessControlTestResource Load (0.3ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 3 LIMIT 1[0m
  [1m[35m (13.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (3)
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (3)[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (13.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (10.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_a_content_author"], ["name", "a_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (18.2ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 4 AND "access_control_test_role_assignments"."resource_id" = 4 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 4 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.3ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 4 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 4], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 4], ["resource_type", "AccessControlTestResource"], ["role_id", 4]]
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 4 LIMIT 1
  [1m[36m (12.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 4 AND "access_control_test_role_assignments"."resource_id" = 4 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36mRoleAssignment Load (0.3ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (15.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (18.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_an_author"], ["name", "an_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (19.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 5 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 5 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 5 AND "access_control_test_role_assignments"."resource_id" = 5 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (16.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (18.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'another_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_another_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_another_content_author"], ["name", "another_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (18.9ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 6 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 6 AND "access_control_test_role_assignments"."resource_id" = 6 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 6 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.3ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 6], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 6], ["resource_type", "AccessControlTestResource"], ["role_id", 6]]
  [1m[36mAccessControlTestResource Load (0.3ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 6 LIMIT 1[0m
  [1m[35m (12.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (17.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (18.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_an_author"], ["name", "just_an_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (17.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 7 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[35m (36.5ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (139.4ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (20.1ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (181.0ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (19.9ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (110.3ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (21.1ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (116.9ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (12.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (12.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.1ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_a_content_author"], ["name", "just_a_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (14.0ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.6ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 1 AND "access_control_test_role_assignments"."resource_id" = 1 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.5ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.4ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 1], ["resource_type", "AccessControlTestResource"], ["role_id", 1]]
  [1m[36mAccessControlTestResource Load (0.4ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 1 LIMIT 1[0m
  [1m[35m (13.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (18.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (18.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_moderator' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_moderator' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_just_a_moderator"], ["name", "just_a_moderator"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (18.6ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 2 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 2 AND "access_control_test_role_assignments"."resource_id" = 2 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 2 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.3ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 2 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 2], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 2], ["resource_type", "AccessControlTestResource"], ["role_id", 2]]
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 2 LIMIT 1
  [1m[36m (12.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 2 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'
  [1m[36mAccessControlTestResource Load (0.6ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (2)[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (2)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (19.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (10.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_a_member"], ["name", "just_a_member"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (17.1ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 3 AND "access_control_test_role_assignments"."resource_id" = 3 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.9ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 3 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.3ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 3], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 3], ["resource_type", "AccessControlTestResource"], ["role_id", 3]]
  [1m[36mAccessControlTestResource Load (0.9ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 3 LIMIT 1[0m
  [1m[35m (12.4ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (3)
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (3)[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (13.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (11.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_a_content_author"], ["name", "a_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (15.6ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 4 AND "access_control_test_role_assignments"."resource_id" = 4 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 4 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.3ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 4 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 4], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 4], ["resource_type", "AccessControlTestResource"], ["role_id", 4]]
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 4 LIMIT 1
  [1m[36m (13.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 4 AND "access_control_test_role_assignments"."resource_id" = 4 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36mRoleAssignment Load (0.3ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (15.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (18.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_an_author"], ["name", "an_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (19.3ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 5 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 5 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 5 AND "access_control_test_role_assignments"."resource_id" = 5 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (16.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (19.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'another_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_another_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_another_content_author"], ["name", "another_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (16.3ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 6 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 6 AND "access_control_test_role_assignments"."resource_id" = 6 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 6 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.2ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 6], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 6], ["resource_type", "AccessControlTestResource"], ["role_id", 6]]
  [1m[36mAccessControlTestResource Load (0.2ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 6 LIMIT 1[0m
  [1m[35m (13.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (17.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (18.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_an_author"], ["name", "just_an_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (19.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (40.1ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (172.5ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (20.0ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (197.7ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (20.0ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (115.2ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (21.1ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (105.6ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (20.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (14.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (16.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.0ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_a_content_author"], ["name", "just_a_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (12.4ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.6ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 1 AND "access_control_test_role_assignments"."resource_id" = 1 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.5ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.4ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 1], ["resource_type", "AccessControlTestResource"], ["role_id", 1]]
  [1m[36mAccessControlTestResource Load (0.3ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 1 LIMIT 1[0m
  [1m[35m (17.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (10.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (18.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_moderator' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.2ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_moderator' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_just_a_moderator"], ["name", "just_a_moderator"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (18.6ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.5ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 2 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 2 AND "access_control_test_role_assignments"."resource_id" = 2 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 2 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.3ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 2 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 2], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 2], ["resource_type", "AccessControlTestResource"], ["role_id", 2]]
  [1m[35mAccessControlTestResource Load (0.2ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 2 LIMIT 1
  [1m[36m (12.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 2 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'
  [1m[36mAccessControlTestResource Load (0.4ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (2)[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (2)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (12.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (18.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_a_member"], ["name", "just_a_member"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (16.9ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 3 AND "access_control_test_role_assignments"."resource_id" = 3 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 3 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.3ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 3], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 3], ["resource_type", "AccessControlTestResource"], ["role_id", 3]]
  [1m[36mAccessControlTestResource Load (0.2ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 3 LIMIT 1[0m
  [1m[35m (13.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (3)
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (3)[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (12.5ms)[0m  COMMIT
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (11.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_a_content_author"], ["name", "a_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (17.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 4 AND "access_control_test_role_assignments"."resource_id" = 4 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 4 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.3ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 4 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 4], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 4], ["resource_type", "AccessControlTestResource"], ["role_id", 4]]
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 4 LIMIT 1
  [1m[36m (13.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 4 AND "access_control_test_role_assignments"."resource_id" = 4 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (12.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (18.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_an_author"], ["name", "an_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (18.4ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 5 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 5 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 5 AND "access_control_test_role_assignments"."resource_id" = 5 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (15.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (19.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'another_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_another_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_another_content_author"], ["name", "another_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (17.4ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.5ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 6 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 6 AND "access_control_test_role_assignments"."resource_id" = 6 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 6 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.3ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 6], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 6], ["resource_type", "AccessControlTestResource"], ["role_id", 6]]
  [1m[36mAccessControlTestResource Load (0.2ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 6 LIMIT 1[0m
  [1m[35m (12.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (16.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (18.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_an_author"], ["name", "just_an_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (56.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 7], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 7], ["resource_type", nil], ["role_id", 7]]
  [1m[36m (12.8ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 7 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."id" = 6 LIMIT 1
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 7 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 7 AND "access_control_test_role_assignments"."resource_id" = 7 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (28.2ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (224.8ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (20.2ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (191.5ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (13.0ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (116.5ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (11.7ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (108.0ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.4ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (13.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (16.4ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.6ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_a_content_author"], ["name", "just_a_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (13.1ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 1 AND "access_control_test_role_assignments"."resource_id" = 1 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.3ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 1], ["resource_type", "AccessControlTestResource"], ["role_id", 1]]
  [1m[36mAccessControlTestResource Load (0.2ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 1 LIMIT 1[0m
  [1m[35m (13.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.3ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (13.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (12.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_moderator' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.2ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_moderator' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_just_a_moderator"], ["name", "just_a_moderator"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (16.8ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 2 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 2 AND "access_control_test_role_assignments"."resource_id" = 2 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 2 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.2ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 2 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 2], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 2], ["resource_type", "AccessControlTestResource"], ["role_id", 2]]
  [1m[35mAccessControlTestResource Load (0.2ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 2 LIMIT 1
  [1m[36m (16.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 2 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'
  [1m[36mAccessControlTestResource Load (0.3ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (2)[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (2)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (12.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (10.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_a_member"], ["name", "just_a_member"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (18.5ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 3 AND "access_control_test_role_assignments"."resource_id" = 3 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.2ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 3 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.2ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 3], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 3], ["resource_type", "AccessControlTestResource"], ["role_id", 3]]
  [1m[36mAccessControlTestResource Load (0.1ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 3 LIMIT 1[0m
  [1m[35m (16.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.3ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mAccessControlTestResource Load (0.2ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (3)
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (3)[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (19.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (10.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.2ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_a_content_author"], ["name", "a_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (18.6ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.3ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 4 AND "access_control_test_role_assignments"."resource_id" = 4 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 4 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.2ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 4 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 4], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 4], ["resource_type", "AccessControlTestResource"], ["role_id", 4]]
  [1m[35mAccessControlTestResource Load (0.2ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 4 LIMIT 1
  [1m[36m (15.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 4 AND "access_control_test_role_assignments"."resource_id" = 4 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36mRoleAssignment Load (0.1ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (17.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (10.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.2ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_an_author"], ["name", "an_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (17.3ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.3ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 5 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mRoleAssignment Load (0.2ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 5 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 5 AND "access_control_test_role_assignments"."resource_id" = 5 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (27.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (10.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'another_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_another_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_another_content_author"], ["name", "another_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (17.9ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 6 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 6 AND "access_control_test_role_assignments"."resource_id" = 6 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 6 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.2ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 6], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 6], ["resource_type", "AccessControlTestResource"], ["role_id", 6]]
  [1m[36mAccessControlTestResource Load (0.1ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 6 LIMIT 1[0m
  [1m[35m (15.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  COMMIT
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (18.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (10.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_an_author"], ["name", "just_an_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (18.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 7], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 7], ["resource_type", nil], ["role_id", 7]]
  [1m[36m (17.5ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 7 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."id" = 6 LIMIT 1
  [1m[36mRoleAssignment Load (0.2ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 7 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 7 AND "access_control_test_role_assignments"."resource_id" = 7 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (20.1ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (225.9ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (21.6ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (196.4ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (20.9ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (113.9ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (21.3ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (115.3ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "other_user"]]
  [1m[36m (12.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'other_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_other_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_other_role"], ["name", "other_role"], ["permissions", "---\n- do_some_stuff\n"], ["system", false]]
  [1m[35m (19.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "some_resource"]]
  [1m[36m (16.9ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.6ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 1 AND "access_control_test_role_assignments"."resource_id" = 1 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.6ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.5ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 1], ["resource_type", "AccessControlTestResource"], ["role_id", 1]]
  [1m[36mAccessControlTestResource Load (0.2ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 1 LIMIT 1[0m
  [1m[35m (19.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mAccessControlTestResource Load (0.4ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (1)
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (1)[0m
  [1m[35m (28.7ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (160.3ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (21.3ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (160.3ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (11.4ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (103.8ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (11.4ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (99.1ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.7ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_new_role"], ["name", "new_role"], ["permissions", "---\n- permission\n"], ["system", false]]
  [1m[36m (11.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.2ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (108.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "Resource A"]]
  [1m[35m (30.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "Resource B"]]
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (38.4ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (184.1ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (20.2ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (197.7ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (19.7ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (109.4ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (21.4ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (99.3ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36mSQL (12.3ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mRole Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'permissive_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_permissive_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_permissive_role"], ["name", "permissive_role"], ["permissions", "---\n- edit_profile\n"], ["system", false]]
  [1m[35m (15.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.5ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'permissive_role' AND "access_control_test_roles"."id" != 1 AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_permissive_role' AND "access_control_test_roles"."id" != 1 AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  UPDATE "access_control_test_roles" SET "permissions" = '---
- edit_profile
- post_content
' WHERE "access_control_test_roles"."id" = 1
  [1m[36m (13.3ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (15.5ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" [0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'any_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_any_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_any_role"], ["name", "any_role"], ["permissions", nil], ["system", false]]
  [1m[35m (12.6ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" [0m
  [1m[35mSQL (10.9ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'Test Role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_test_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_test_role"], ["name", "Test Role"], ["permissions", nil], ["system", false]]
  [1m[35m (19.6ms)[0m  COMMIT
  [1m[36mSQL (11.6ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a test role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_test_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_a_test_role"], ["name", "a test role"], ["permissions", "---\n- perm1\n"], ["system", false]]
  [1m[35m (20.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (17.7ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (17.0ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a test role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_test_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_a_test_role"], ["name", "a test role"], ["permissions", "---\n- perm1\n"], ["system", false]]
  [1m[35m (17.1ms)[0m  COMMIT
  [1m[36mSQL (11.0ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'Test Role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'foo' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "foo"], ["name", "Test Role"], ["permissions", nil], ["system", false]]
  [1m[35m (20.0ms)[0m  COMMIT
  [1m[36mSQL (11.6ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'unique key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'my_key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "my_key"], ["name", "unique key"], ["permissions", nil], ["system", false]]
  [1m[36m (17.6ms)[0m  [1mCOMMIT[0m
  [1m[35mRole Exists (0.6ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" IS NULL AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'my_key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (15.6ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_role_name"], ["name", "role_name"], ["permissions", nil], ["system", false]]
  [1m[36m (12.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (98.5ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (182.0ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (25.1ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (116.7ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (11.9ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (111.5ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (21.4ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (86.4ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.4ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'permissive_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_permissive_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_permissive_role"], ["name", "permissive_role"], ["permissions", "---\n- edit_profile\n"], ["system", false]]
  [1m[35m (16.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.5ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'permissive_role' AND "access_control_test_roles"."id" != 1 AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_permissive_role' AND "access_control_test_roles"."id" != 1 AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  UPDATE "access_control_test_roles" SET "permissions" = '---
- edit_profile
- post_content
' WHERE "access_control_test_roles"."id" = 1
  [1m[36m (13.0ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (14.1ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" [0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'any_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_any_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_any_role"], ["name", "any_role"], ["permissions", nil], ["system", false]]
  [1m[35m (16.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" [0m
  [1m[35mSQL (20.1ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'Test Role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_test_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_test_role"], ["name", "Test Role"], ["permissions", nil], ["system", false]]
  [1m[35m (17.0ms)[0m  COMMIT
  [1m[36mSQL (12.7ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a test role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_test_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_a_test_role"], ["name", "a test role"], ["permissions", "---\n- perm1\n"], ["system", false]]
  [1m[35m (18.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (19.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", nil], ["resource_type", nil], ["role_id", 4]]
  [1m[35m (15.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRoleAssignment Load (0.6ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."role_id" = 4
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."id" = $1[0m  [["id", 1]]
  [1m[35mAccessControlTestAccessor Load (0.4ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 1 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = $1[0m  [["id", 4]]
  [1m[35m (12.5ms)[0m  COMMIT
  [1m[36mRoleAssignment Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a test role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_test_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_a_test_role"], ["name", "a test role"], ["permissions", "---\n- perm1\n"], ["system", false]]
  [1m[35m (13.7ms)[0m  COMMIT
  [1m[36mSQL (11.1ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'Test Role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'foo' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "foo"], ["name", "Test Role"], ["permissions", nil], ["system", false]]
  [1m[35m (19.0ms)[0m  COMMIT
  [1m[36mSQL (11.3ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'unique key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'my_key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "my_key"], ["name", "unique key"], ["permissions", nil], ["system", false]]
  [1m[36m (18.0ms)[0m  [1mCOMMIT[0m
  [1m[35mRole Exists (0.5ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" IS NULL AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'my_key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (15.0ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_role_name"], ["name", "role_name"], ["permissions", nil], ["system", false]]
  [1m[36m (19.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (33.7ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (141.1ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (20.3ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (182.5ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (20.3ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (112.7ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (20.1ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (99.3ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'permissive_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_permissive_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_permissive_role"], ["name", "permissive_role"], ["permissions", "---\n- edit_profile\n"], ["system", false]]
  [1m[35m (11.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.5ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'permissive_role' AND "access_control_test_roles"."id" != 1 AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_permissive_role' AND "access_control_test_roles"."id" != 1 AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  UPDATE "access_control_test_roles" SET "permissions" = '---
- edit_profile
- post_content
' WHERE "access_control_test_roles"."id" = 1
  [1m[36m (13.0ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (14.9ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" [0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'any_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_any_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_any_role"], ["name", "any_role"], ["permissions", nil], ["system", false]]
  [1m[35m (18.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" [0m
  [1m[35mSQL (20.1ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a test role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'some_unprobable_key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "some_unprobable_key"], ["name", "a test role"], ["permissions", nil], ["system", false]]
  [1m[36m (13.6ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (12.9ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'Test Role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_test_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_test_role"], ["name", "Test Role"], ["permissions", nil], ["system", false]]
  [1m[36m (18.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (12.5ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a test role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_test_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_a_test_role"], ["name", "a test role"], ["permissions", "---\n- perm1\n"], ["system", false]]
  [1m[36m (17.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "accessor"]]
  [1m[35m (19.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", nil], ["resource_type", nil], ["role_id", 5]]
  [1m[36m (16.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRoleAssignment Load (0.6ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."role_id" = 5[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."id" = $1  [["id", 1]]
  [1m[36mAccessControlTestAccessor Load (0.4ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = $1  [["id", 5]]
  [1m[36m (13.9ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."id" = 1 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a test role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_test_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_a_test_role"], ["name", "a test role"], ["permissions", "---\n- perm1\n"], ["system", false]]
  [1m[36m (13.9ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (11.2ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a test role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'some_unprobable_key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "some_unprobable_key"], ["name", "a test role"], ["permissions", nil], ["system", true]]
  [1m[36m (13.0ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (11.0ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'not to be removed' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_not_to_be_removed' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_not_to_be_removed"], ["name", "not to be removed"], ["permissions", "--- []\n"], ["system", true]]
  [1m[36m (19.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" 
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."role_id" = 8
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" 
  [1m[36mSQL (15.7ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'Test Role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.2ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'foo' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "foo"], ["name", "Test Role"], ["permissions", nil], ["system", false]]
  [1m[35m (13.2ms)[0m  COMMIT
  [1m[36mSQL (11.2ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'to be removed' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_to_be_removed' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_to_be_removed"], ["name", "to be removed"], ["permissions", "--- []\n"], ["system", false]]
  [1m[36m (20.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" 
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."role_id" = 10
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = $1[0m  [["id", 10]]
  [1m[35m (17.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" [0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'unique key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.2ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'my_key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "my_key"], ["name", "unique key"], ["permissions", nil], ["system", false]]
  [1m[35m (16.0ms)[0m  COMMIT
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" IS NULL AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'my_key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (15.1ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_role_name"], ["name", "role_name"], ["permissions", nil], ["system", false]]
  [1m[35m (18.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[35m (19.2ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (160.8ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (21.7ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (152.3ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (21.3ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (78.0ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (20.0ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (107.7ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.1ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_new_role"], ["name", "new_role"], ["permissions", "---\n- permission\n"], ["system", false]]
  [1m[36m (14.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (38.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "Resource A"]]
  [1m[35m (93.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "Resource B"]]
  [1m[36m (19.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (32.3ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (221.2ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (21.6ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (196.3ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (21.1ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (106.8ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (20.2ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (115.4ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (19.0ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.0ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_new_role"], ["name", "new_role"], ["permissions", "---\n- permission\n"], ["system", false]]
  [1m[36m (16.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.2ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (38.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "Resource A"]]
  [1m[35m (17.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "Resource B"]]
  [1m[36m (19.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (29.7ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (149.1ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (20.4ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (199.2ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (21.3ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (114.7ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (13.0ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (107.5ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.5ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.1ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_new_role"], ["name", "new_role"], ["permissions", "---\n- permission\n"], ["system", false]]
  [1m[36m (11.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (95.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "Resource A"]]
  [1m[35m (32.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "Resource B"]]
  [1m[36m (19.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (21.2ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (140.9ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (21.5ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (169.2ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (20.4ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (115.9ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (21.3ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (111.4ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.1ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_new_role"], ["name", "new_role"], ["permissions", "---\n- permission\n"], ["system", false]]
  [1m[36m (12.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (29.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "Resource A"]]
  [1m[35m (19.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "Resource B"]]
  [1m[36m (10.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (33.2ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (152.3ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (21.8ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (160.7ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (20.0ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (121.0ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (20.2ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (107.5ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.1ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_new_role"], ["name", "new_role"], ["permissions", "---\n- permission\n"], ["system", false]]
  [1m[36m (12.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (43.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", true], ["resource_id", nil], ["resource_type", nil], ["role_id", nil]]
  [1m[35m (18.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (16.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "Resource A"]]
  [1m[35m (18.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "Resource B"]]
  [1m[36m (19.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (32.3ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (140.7ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (20.6ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (170.2ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (20.2ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (115.9ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (21.5ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (111.3ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.1ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_new_role"], ["name", "new_role"], ["permissions", "---\n- permission\n"], ["system", false]]
  [1m[36m (15.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (42.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.2ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", true], ["resource_id", nil], ["resource_type", nil], ["role_id", nil]]
  [1m[35m (82.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[35m (29.2ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (160.6ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (20.5ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (153.7ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (20.1ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (112.7ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (20.1ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (99.3ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.1ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_new_role"], ["name", "new_role"], ["permissions", "---\n- permission\n"], ["system", false]]
  [1m[36m (15.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (32.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", true], ["resource_id", nil], ["resource_type", nil], ["role_id", nil]]
  [1m[35m (15.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[35m (13.3ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (175.9ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (21.5ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (138.2ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (21.0ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (98.6ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (20.1ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (118.7ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.1ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_new_role"], ["name", "new_role"], ["permissions", "---\n- permission\n"], ["system", false]]
  [1m[36m (18.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (13.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", true], ["resource_id", nil], ["resource_type", nil], ["role_id", nil]]
  [1m[35m (15.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (16.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "Resource A"]]
  [1m[35m (20.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "Resource B"]]
  [1m[36m (18.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (39.0ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (153.2ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (22.1ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (161.5ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (21.7ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (120.6ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (21.6ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (99.9ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.1ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_new_role"], ["name", "new_role"], ["permissions", "---\n- permission\n"], ["system", false]]
  [1m[36m (11.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (121.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", true], ["resource_id", nil], ["resource_type", nil], ["role_id", nil]]
  [1m[35m (32.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (15.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "Resource A"]]
  [1m[35m (19.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "Resource B"]]
  [1m[36m (11.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 2], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 1], ["resource_type", nil], ["role_id", nil]]
  [1m[35m (13.0ms)[0m  COMMIT
  [1m[35m (32.1ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (154.5ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (25.1ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (217.0ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (21.7ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (79.0ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (21.7ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (87.5ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (12.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.1ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_new_role"], ["name", "new_role"], ["permissions", "---\n- permission\n"], ["system", false]]
  [1m[36m (17.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (42.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.2ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", true], ["resource_id", nil], ["resource_type", nil], ["role_id", nil]]
  [1m[35m (15.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "accessor"]]
  [1m[36m (14.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "Resource A"]]
  [1m[35m (18.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "Resource B"]]
  [1m[36m (17.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_new_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 2], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 1], ["resource_type", "AccessControlTestResource"], ["role_id", nil]]
  [1m[35m (18.5ms)[0m  COMMIT
  [1m[35m (34.1ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (226.9ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (21.6ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (160.2ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (20.0ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (128.8ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (20.0ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (119.2ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'permissive_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.2ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_permissive_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_permissive_role"], ["name", "permissive_role"], ["permissions", "---\n- edit_profile\n"], ["system", false]]
  [1m[35m (17.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.5ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'permissive_role' AND "access_control_test_roles"."id" != 1 AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_permissive_role' AND "access_control_test_roles"."id" != 1 AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  UPDATE "access_control_test_roles" SET "permissions" = '---
- edit_profile
- post_content
' WHERE "access_control_test_roles"."id" = 1
  [1m[36m (11.5ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (14.9ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" [0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'any_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_any_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_any_role"], ["name", "any_role"], ["permissions", nil], ["system", false]]
  [1m[35m (11.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" [0m
  [1m[35mSQL (12.2ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a test role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'some_unprobable_key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "some_unprobable_key"], ["name", "a test role"], ["permissions", nil], ["system", false]]
  [1m[36m (11.9ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (12.2ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'Test Role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_test_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_test_role"], ["name", "Test Role"], ["permissions", nil], ["system", false]]
  [1m[36m (18.1ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (11.1ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a test role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_test_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_a_test_role"], ["name", "a test role"], ["permissions", "---\n- perm1\n"], ["system", false]]
  [1m[36m (19.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "accessor"]]
  [1m[35m (17.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", nil], ["resource_type", nil], ["role_id", 5]]
  [1m[36m (19.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRoleAssignment Load (0.5ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."role_id" = 5[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."id" = $1  [["id", 1]]
  [1m[36mAccessControlTestAccessor Load (0.4ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = $1  [["id", 5]]
  [1m[36m (11.3ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."id" = 1 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a test role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_test_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_a_test_role"], ["name", "a test role"], ["permissions", "---\n- perm1\n"], ["system", false]]
  [1m[36m (16.3ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (18.8ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a test role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'some_unprobable_key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "some_unprobable_key"], ["name", "a test role"], ["permissions", nil], ["system", true]]
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (12.2ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'not to be removed' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_not_to_be_removed' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_not_to_be_removed"], ["name", "not to be removed"], ["permissions", "--- []\n"], ["system", true]]
  [1m[36m (11.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" 
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."role_id" = 8
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" 
  [1m[36mSQL (17.4ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'Test Role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'foo' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "foo"], ["name", "Test Role"], ["permissions", nil], ["system", false]]
  [1m[35m (11.9ms)[0m  COMMIT
  [1m[36mSQL (12.3ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'to be removed' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_to_be_removed' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_to_be_removed"], ["name", "to be removed"], ["permissions", "--- []\n"], ["system", false]]
  [1m[36m (10.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" 
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."role_id" = 10
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = $1[0m  [["id", 10]]
  [1m[35m (17.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(DISTINCT "access_control_test_roles"."id") FROM "access_control_test_roles" [0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "access_control_test_roles"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'unique key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'my_key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "my_key"], ["name", "unique key"], ["permissions", nil], ["system", false]]
  [1m[35m (17.7ms)[0m  COMMIT
  [1m[36mRole Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" IS NULL AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'my_key' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (10.8ms)[0m  [1mDELETE FROM "access_control_test_roles"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_role_name"], ["name", "role_name"], ["permissions", nil], ["system", false]]
  [1m[35m (19.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_role_name' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[35m (21.7ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (206.8ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (21.6ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (155.4ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (21.5ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (107.4ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (20.1ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (119.2ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (20.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (19.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.1ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_a_content_author"], ["name", "just_a_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (13.6ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.6ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 1 AND "access_control_test_role_assignments"."resource_id" = 1 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.5ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.4ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 1], ["resource_type", "AccessControlTestResource"], ["role_id", 1]]
  [1m[36mAccessControlTestResource Load (0.4ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 1 LIMIT 1[0m
  [1m[35m (16.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (18.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (18.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_moderator' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_moderator' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_just_a_moderator"], ["name", "just_a_moderator"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (19.0ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.3ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 2 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 2 AND "access_control_test_role_assignments"."resource_id" = 2 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 2 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.3ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 2 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 2], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 2], ["resource_type", "AccessControlTestResource"], ["role_id", 2]]
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 2 LIMIT 1
  [1m[36m (12.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 2 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'
  [1m[36mAccessControlTestResource Load (0.5ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (2)[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (2)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (14.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (18.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_a_member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_a_member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_a_member"], ["name", "just_a_member"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (17.3ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 3 AND "access_control_test_role_assignments"."resource_id" = 3 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 3 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.3ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 3], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 3], ["resource_type", "AccessControlTestResource"], ["role_id", 3]]
  [1m[36mAccessControlTestResource Load (0.3ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 3 LIMIT 1[0m
  [1m[35m (13.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (3)
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (3)[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (13.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (23.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_a_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_a_content_author"], ["name", "a_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (18.8ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 4 AND "access_control_test_role_assignments"."resource_id" = 4 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 4 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.3ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 4 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 4], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 4], ["resource_type", "AccessControlTestResource"], ["role_id", 4]]
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 4 LIMIT 1
  [1m[36m (16.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 4 AND "access_control_test_role_assignments"."resource_id" = 4 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36mRoleAssignment Load (0.3ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (14.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (18.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_an_author"], ["name", "an_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (19.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 5 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 5 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 5 AND "access_control_test_role_assignments"."resource_id" = 5 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (15.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (19.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'another_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_another_content_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_another_content_author"], ["name", "another_content_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (16.4ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 6 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 6 AND "access_control_test_role_assignments"."resource_id" = 6 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.4ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 6 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.3ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 6], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 6], ["resource_type", "AccessControlTestResource"], ["role_id", 6]]
  [1m[36mAccessControlTestResource Load (0.2ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 6 LIMIT 1[0m
  [1m[35m (12.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (16.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (18.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'just_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_just_an_author' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_just_an_author"], ["name", "just_an_author"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (13.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 7], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 7], ["resource_type", nil], ["role_id", 7]]
  [1m[36m (15.4ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 7 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."id" = 6 LIMIT 1
  [1m[36mRoleAssignment Load (0.3ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 7 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 7 AND "access_control_test_role_assignments"."resource_id" = 7 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (32.7ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (165.1ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (21.5ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (154.2ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (20.4ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (108.2ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (21.7ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (120.6ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (18.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (17.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (1.0ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'some member role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_some_member_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_some_member_role"], ["name", "some member role"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (104.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'some admin role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_some_admin_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_some_admin_role"], ["name", "some admin role"], ["permissions", "---\n- bla\n"], ["system", false]]
  [1m[35m (14.6ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.6ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 1 AND "access_control_test_role_assignments"."resource_id" = 1 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.4ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 1], ["resource_type", "AccessControlTestResource"], ["role_id", 1]]
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 1 LIMIT 1
  [1m[36m (57.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.5ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 2 AND "access_control_test_role_assignments"."resource_id" = 1 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 2 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.2ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 1], ["resource_type", "AccessControlTestResource"], ["role_id", 2]]
  [1m[36mAccessControlTestResource Load (0.2ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 1 LIMIT 1[0m
  [1m[35m (17.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (1)
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (1, 2)[0m
  [1m[35mRoleAssignment Load (0.3ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'
  [1m[36mAccessControlTestResource Load (0.4ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (1)[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (1, 2)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "bla"]]
  [1m[36m (42.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "ze"]]
  [1m[35m (19.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRole Exists (0.4ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'some new role for member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_some_new_role_for_member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["environment_id", nil], ["key", "profile_some_new_role_for_member"], ["name", "some new role for member"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[36m (40.0ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.5ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 2 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 3 AND "access_control_test_role_assignments"."resource_id" = 2 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 3 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.3ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 2], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 2], ["resource_type", "AccessControlTestResource"], ["role_id", 3]]
  [1m[36mAccessControlTestResource Load (0.3ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 2 LIMIT 1[0m
  [1m[35m (12.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.3ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 2 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (2)
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (3)[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (63.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (18.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'some wrenked role for member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_some_wrenked_role_for_member' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_some_wrenked_role_for_member"], ["name", "some wrenked role for member"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (79.8ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 4 AND "access_control_test_role_assignments"."resource_id" = 3 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 4 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.3ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 3 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 3], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 3], ["resource_type", "AccessControlTestResource"], ["role_id", 4]]
  [1m[35mAccessControlTestResource Load (0.3ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 3 LIMIT 1
  [1m[36m (15.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.4ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'
  [1m[36mAccessControlTestResource Load (0.3ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (3)[0m
  [1m[35mRole Load (0.3ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (4)
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."resource_id" = 3 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."id" = $1[0m  [["id", 4]]
  [1m[35m (63.1ms)[0m  COMMIT
  [1m[36mAccessControlTestResource Load (0.5ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mAccessControlTestAccessor Load (0.4ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mRoleAssignment Load (0.3ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 3 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"[0m  [["name", "bla"]]
  [1m[35m (14.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "ze"]]
  [1m[36m (20.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'some tested member role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_some_tested_member_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_some_tested_member_role"], ["name", "some tested member role"], ["permissions", "---\n- bli\n"], ["system", false]]
  [1m[35m (16.6ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.3ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 4 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 5 AND "access_control_test_role_assignments"."resource_id" = 4 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mRole Load (0.2ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 5 LIMIT 1[0m
  [1m[35mAccessControlTestAccessor Load (0.2ms)[0m  SELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 4 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["accessor_id", 4], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 4], ["resource_type", "AccessControlTestResource"], ["role_id", 5]]
  [1m[35mAccessControlTestResource Load (0.2ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 4 LIMIT 1
  [1m[36m (17.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (21.6ms)[0m  DROP TABLE "access_control_test_roles"
  [1m[36m (225.5ms)[0m  [1mCREATE TABLE "access_control_test_roles" ("id" serial primary key, "name" character varying(255), "permissions" character varying(255), "key" character varying(255), "system" boolean DEFAULT 'f', "environment_id" integer) [0m
  [1m[35m (22.5ms)[0m  DROP TABLE "access_control_test_role_assignments"
  [1m[36m (175.9ms)[0m  [1mCREATE TABLE "access_control_test_role_assignments" ("id" serial primary key, "role_id" integer, "accessor_id" integer, "accessor_type" character varying(255), "resource_id" integer, "resource_type" character varying(255), "is_global" boolean) [0m
  [1m[35m (20.3ms)[0m  DROP TABLE "access_control_test_accessors"
  [1m[36m (99.9ms)[0m  [1mCREATE TABLE "access_control_test_accessors" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (23.4ms)[0m  DROP TABLE "access_control_test_resources"
  [1m[36m (112.1ms)[0m  [1mCREATE TABLE "access_control_test_resources" ("id" serial primary key, "name" character varying(255)) [0m
  [1m[35m (0.5ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "access_control_test_accessors" ("name") VALUES ($1) RETURNING "id"  [["name", "other_user"]]
  [1m[36m (59.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mRole Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."name" = 'other_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1[0m
  [1m[35mRole Exists (0.3ms)[0m  SELECT 1 AS one FROM "access_control_test_roles" WHERE ("access_control_test_roles"."key" = 'profile_other_role' AND "access_control_test_roles"."environment_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "access_control_test_roles" ("environment_id", "key", "name", "permissions", "system") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["environment_id", nil], ["key", "profile_other_role"], ["name", "other_role"], ["permissions", "---\n- do_some_stuff\n"], ["system", false]]
  [1m[35m (13.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "access_control_test_resources" ("name") VALUES ($1) RETURNING "id"  [["name", "some_resource"]]
  [1m[36m (19.0ms)[0m  [1mCOMMIT[0m
  [1m[35mRoleAssignment Load (0.6ms)[0m  SELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor' AND "access_control_test_role_assignments"."role_id" = 1 AND "access_control_test_role_assignments"."resource_id" = 1 AND "access_control_test_role_assignments"."resource_type" = 'AccessControlTestResource'
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mRole Load (0.5ms)[0m  SELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" = 1 LIMIT 1
  [1m[36mAccessControlTestAccessor Load (0.6ms)[0m  [1mSELECT "access_control_test_accessors".* FROM "access_control_test_accessors" WHERE "access_control_test_accessors"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "access_control_test_role_assignments" ("accessor_id", "accessor_type", "is_global", "resource_id", "resource_type", "role_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["accessor_id", 1], ["accessor_type", "AccessControlTestAccessor"], ["is_global", nil], ["resource_id", 1], ["resource_type", "AccessControlTestResource"], ["role_id", 1]]
  [1m[36mAccessControlTestResource Load (0.3ms)[0m  [1mSELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" = 1 LIMIT 1[0m
  [1m[35m (13.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36mRoleAssignment Load (0.4ms)[0m  [1mSELECT "access_control_test_role_assignments".* FROM "access_control_test_role_assignments" WHERE "access_control_test_role_assignments"."accessor_id" = 1 AND "access_control_test_role_assignments"."accessor_type" = 'AccessControlTestAccessor'[0m
  [1m[35mAccessControlTestResource Load (0.4ms)[0m  SELECT "access_control_test_resources".* FROM "access_control_test_resources" WHERE "access_control_test_resources"."id" IN (1)
  [1m[36mRole Load (0.3ms)[0m  [1mSELECT "access_control_test_roles".* FROM "access_control_test_roles" WHERE "access_control_test_roles"."id" IN (1)[0m
